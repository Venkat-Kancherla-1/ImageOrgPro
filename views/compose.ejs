<%- include("partials/header"); -%>

<h1>Compose</h1>
<form class="" action="/compose" method="post" enctype="multipart/form-data">
  <div class="form-group">
    <input class="form-control" type="text" name="postTitle" placeholder="Date">
  </div>
  <br>
  <div class="form-group">
    <textarea class="form-control" name="postBody" rows="1" cols="30" placeholder="Location"></textarea>
  </div>
  <br>
  <div class="form-group">
    <label>Before Work</label>
    <input class="form-control" type="file" name="image1" multiple />
  </div>
  <br>
  <div class="form-group">
    <label>On Work</label>
    <input class="form-control" type="file" name="image2" multiple />
  </div>
  <br>
  <div class="form-group">
    <label>After Work</label>
    <input class="form-control" type="file" name="image3" multiple />
  </div>
  <br>
  <!-- Button to open the confirmation modal -->
  <button type="button" class="btn btn-primary" onclick="openConfirmationModal()">Publish</button>
</form>

<!-- Modal for confirmation -->
<div class="modal fade" id="confirmationModal" tabindex="-1" role="dialog" aria-labelledby="confirmationModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="confirmationModalLabel">Confirmation Required</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Please enter password to confirm publishing:</p>
        <input type="text" class="form-control" id="confirmationInput">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" onclick="submitWithConfirmation()">Publish</button>
      </div>
    </div>
  </div>
</div>

<%- include("partials/footer"); -%>

<script>
  function openConfirmationModal() {
    $('#confirmationModal').modal('show');
  }

  function submitWithConfirmation() {
    const confirmationInput = document.getElementById('confirmationInput').value;
    if (confirmationInput === 'confirmation value') {
      $('#confirmationModal').modal('hide');
      const form = document.querySelector('form');
      form.submit();
    }
  }
</script>
